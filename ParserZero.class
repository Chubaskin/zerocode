<?php
 
require_once('Parser.class');
 
class ListParser extends Parser {
    public function ListParser(Lexer $input) {
        parent::__construct($input);
    }
 
    /** get command block */
    public function rlist() {
        $this->match(LexerZero::VARIABLE);
        $this->match(LexerZero::SPACE);
        $this->match(LexerZero::VARIABLE);
        $this->elements();
        $this->match(LexerZero::RBRACK);
    }
    
    
    /** elements : element (',' element)* ; */
    function elements() {
        $this->element();
        while ($this->lookahead->type == LexerZero::COMMA ) {
            $this->match(LexerZero::COMMA);
            $this->element();
        }
    }
    /** element : name | list ; // element is name or nested list */
    function element() {
        if ($this->lookahead->type == LexerZero::NAME ) {
            $this->match(LexerZero::NAME);
        }
        else if ($this->lookahead->type == LexerZero::LBRACK) {
            $this->rlist();
        }
        else {
            throw new Exception("Expecting name or list : Found "  . 
                                 $this->lookahead);
        }
    }
}
 
?>
